
RGraph=window.RGraph||{isrgraph:true,isRGraph:true,rgraph:true};RGraph.SVG=RGraph.SVG||{};(function(win,doc,undefined)
{RGraph.SVG.tooltips={};RGraph.SVG.tooltips.css=RGraph.SVG.tooltips.style={display:'inline-block',position:'absolute',padding:'6px',lineHeight:'initial',fontFamily:'Arial',fontSize:'12pt',fontWeight:'normal',textAlign:'center',left:0,top:0,backgroundColor:'rgb(255,255,239)',color:'black',visibility:'visible',zIndex:3,borderRadius:'5px',boxShadow:'rgba(96,96,96,0.5) 0 0 5px',transition:'left ease-out .25s, top ease-out .25s'};RGraph.SVG.tooltip=function(opt)
{var obj=opt.object;RGraph.SVG.fireCustomEvent(obj,'onbeforetooltip');if(!opt.text||typeof opt.text==='undefined'||RGraph.SVG.trim(opt.text).length===0){return;}
var prop=obj.properties;if(typeof prop.tooltipsOverride==='function'){document.body.addEventListener('mouseup',function(e)
{obj.removeHighlight();},false);return(prop.tooltipsOverride)(obj,opt);}
if(!RGraph.SVG.REG.get('tooltip')){var tooltipObj=document.createElement('DIV');tooltipObj.className=prop.tooltipsCssClass;for(var i in RGraph.SVG.tooltips.style){if(typeof i==='string'){tooltipObj.style[i]=RGraph.SVG.tooltips.style[i];}}
for(var i in RGraph.SVG.tooltips.css){if(typeof i==='string'){tooltipObj.style[i]=RGraph.SVG.tooltips.css[i];}}
if(!RGraph.SVG.isNull(obj.properties.tooltipsCss)){for(var i in obj.properties.tooltipsCss){if(typeof i==='string'){tooltipObj.style[i]=obj.properties.tooltipsCss[i];}}}}else{var tooltipObj=RGraph.SVG.REG.get('tooltip');tooltipObj.__object__.removeHighlight();tooltipObj.style.width='';}
if(RGraph.SVG.REG.get('tooltip-lasty')){tooltipObj.style.left=RGraph.SVG.REG.get('tooltip-lastx')+'px';tooltipObj.style.top=RGraph.SVG.REG.get('tooltip-lasty')+'px';}
function substitute(original)
{if(typeof opt.object.tooltipSubstitutions!=='function'){return original;}
if(typeof opt.object.tooltipSubstitutions==='function'){var specific=opt.object.tooltipSubstitutions({index:opt.sequentialIndex});}
var text=original.replace(/%%/g,'___--PERCENT--___')
var keyReplacementFunction=function()
{if(!specific.values){return;}
var colors=prop.tooltipsFormattedKeyColors?prop.tooltipsFormattedKeyColors:prop.colors;for(var i=0,str=[];i<specific.values.length;++i){var value=(typeof specific.values==='object'&&typeof specific.values[i]==='number')?specific.values[i]:0;var color=colors[i];var label=((typeof prop.tooltipsFormattedKeyLabels==='object'&&typeof prop.tooltipsFormattedKeyLabels[i]==='string')?prop.tooltipsFormattedKeyLabels[i]:'');if(opt.object.type==='bar'){if(typeof opt.object.data[0]==='object'){label=(!RGraph.SVG.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[i])?prop.tooltipsFormattedKeyLabels[i]:'';}else{label=(!RGraph.SVG.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[specific.dataset])?prop.tooltipsFormattedKeyLabels[specific.dataset]:'';}}else if(opt.object.type==='bipolar'){var side=((specific.dataset+1)>opt.object.left.length)?'right':'left';color=(!RGraph.isNull(prop.tooltipsFormattedKeyColors)&&typeof prop.tooltipsFormattedKeyColors==='object'&&prop.tooltipsFormattedKeyColors[i])?prop.tooltipsFormattedKeyColors[i]:prop.colors[i];if(typeof opt.object[side][specific.dataset2]==='object'){label=(!RGraph.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[i])?prop.tooltipsFormattedKeyLabels[i]:'';}else{label=(!RGraph.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[specific.dataset2])?prop.tooltipsFormattedKeyLabels[specific.dataset2]:'';}}else if(opt.object.type==='funnel'){color=colors[specific.index];label=((typeof prop.tooltipsFormattedKeyLabels==='object'&&typeof prop.tooltipsFormattedKeyLabels[specific.index]==='string')?prop.tooltipsFormattedKeyLabels[specific.index]:'');}else if(opt.object.type==='hbar'){if(typeof opt.object.data[0]==='object'){label=(!RGraph.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[i])?prop.tooltipsFormattedKeyLabels[i]:'';}else{label=(!RGraph.SVG.isNull(prop.tooltipsFormattedKeyLabels)&&typeof prop.tooltipsFormattedKeyLabels==='object'&&prop.tooltipsFormattedKeyLabels[specific.dataset])?prop.tooltipsFormattedKeyLabels[specific.dataset]:'';}}else if(opt.object.type==='pie'){color=colors[specific.index];label=((typeof prop.tooltipsFormattedKeyLabels==='object'&&typeof prop.tooltipsFormattedKeyLabels[specific.index]==='string')?prop.tooltipsFormattedKeyLabels[specific.index]:'');}else if(opt.object.type==='semicircularprogress'){color=colors[0];label=((typeof prop.tooltipsFormattedKeyLabels==='object'&&typeof prop.tooltipsFormattedKeyLabels[0]==='string')?prop.tooltipsFormattedKeyLabels[0]:'');}else if(opt.object.type==='radar'){}else if(opt.object.type==='rose'){color=opt.object.properties.colors[i];if(typeof opt.object.data[specific.dataset]==='number'){label=opt.object.properties.tooltipsFormattedKeyLabels[specific.dataset]||'';}else if(typeof opt.object.data[specific.dataset]==='object'&&opt.object.properties.variant==='non-equi-angular'){if(RGraph.isNumber(opt.object.data[specific.dataset][0])){if(i>0){continue;}
color=colors[specific.index];value=opt.object.data[specific.index][0];label=prop.tooltipsFormattedKeyLabels[specific.dataset];}else if(RGraph.isArray(opt.object.data[specific.dataset][0])){color=colors[i];value=opt.object.data[specific.dataset][0][i];label=prop.tooltipsFormattedKeyLabels[i];}}}else if(opt.object.type==='scatter'){color=opt.object.data[specific.dataset][specific.index].color?opt.object.data[specific.dataset][specific.index].color:prop.colorsDefault;label=prop.tooltipsFormattedKeyLabels[specific.dataset]?prop.tooltipsFormattedKeyLabels[specific.dataset]:'';}else if(opt.object.type==='waterfall'){colors=prop.colors;if(prop.tooltipsFormattedKeyColors&&prop.tooltipsFormattedKeyColors[0]&&prop.tooltipsFormattedKeyColors[1]&&prop.tooltipsFormattedKeyColors[2]){colors=prop.tooltipsFormattedKeyColors;}else{colors=prop.colors;}
color=colors[0];if(specific.value<0){color=colors[1];}
if((specific.index+1)===opt.object.data.length||RGraph.SVG.isNull(opt.object.data[specific.index])){color=colors[2];}
if(prop.tooltipsFormattedKeyLabels&&typeof prop.tooltipsFormattedKeyLabels==='object'){var isLast=specific.index===(opt.object.data.length-1);var isNull=RGraph.SVG.isNull(opt.object.data[specific.index]);var isPositive=specific.value>0;var isNegative=specific.value<0;if(isLast){label=typeof prop.tooltipsFormattedKeyLabels[2]==='string'?prop.tooltipsFormattedKeyLabels[2]:'';}else if(!isLast&&isNull){label=typeof prop.tooltipsFormattedKeyLabels[3]==='string'?prop.tooltipsFormattedKeyLabels[3]:'';}else if(typeof prop.tooltipsFormattedKeyLabels[0]==='string'&&isPositive&&!isLast){label=prop.tooltipsFormattedKeyLabels[0];}else if(typeof prop.tooltipsFormattedKeyLabels[1]==='string'&&isNegative){label=prop.tooltipsFormattedKeyLabels[1];}else if(typeof prop.tooltipsFormattedKeyLabels[2]==='string'&&isLast){label=prop.tooltipsFormattedKeyLabels[2];}}
if(RGraph.SVG.isNull(opt.object.data[specific.index])){for(var i=0,value=0;i<=specific.index;++i){value+=opt.object.data[i];}}}
value=RGraph.SVG.numberFormat({object:opt.object,num:value.toFixed(opt.object.properties.tooltipsFormattedDecimals),thousand:opt.object.properties.tooltipsFormattedThousand||',',point:opt.object.properties.tooltipsFormattedPoint||'.',prepend:opt.object.properties.tooltipsFormattedUnitsPre||'',append:opt.object.properties.tooltipsFormattedUnitsPost||''});str[i]='<tr><td><div style="text-align: left; background-color: '
+color+'; color: transparent; pointer-events: none">Ml</div></td><td style="text-align: left">'
+label
+' '+value+'</td></tr>';}
str=str.join('');text=text.replace('%{key}','<table style="color: inherit">'+str+'</table>');};keyReplacementFunction();text=text.replace(/%{index}/g,specific.index);text=text.replace(/%{dataset2}/g,specific.dataset2);text=text.replace(/%{dataset}/g,specific.dataset);text=text.replace(/%{group2}/g,specific.dataset2);text=text.replace(/%{group}/g,specific.dataset);text=text.replace(/%{sequential_index}/g,specific.sequentialIndex);text=text.replace(/%{seq}/g,specific.sequentialIndex);var reg=/%{prop(?:erty)?:([a-z0-9]+)\[([0-9]+)\]}/i;while(text.match(reg)){var property=RegExp.$1;var index=parseInt(RegExp.$2);if(opt.object.properties[property]){text=text.replace(reg,opt.object.properties[property][index]||'');}else{text=text.replace(reg,'');}
RegExp.lastIndex=null;}
while(text.match(/%{property:([a-z0-9]+)}/i)){var str='%{property:'+RegExp.$1+'}';text=text.replace(str,opt.object.properties[RegExp.$1]);}
while(text.match(/%{prop:([a-z0-9]+)}/i)){var str='%{prop:'+RegExp.$1+'}';text=text.replace(str,opt.object.properties[RegExp.$1]);}
while(text.match(/%{value(?:_formatted)?}/i)){var value=specific.value;if(opt.object.type==='waterfall'&&specific.index!=opt.object.data.length-1&&RGraph.SVG.isNull(value)){for(var i=0,tot=0;i<specific.index;++i){tot+=opt.object.data[i];}
value=tot;}
if(text.match(/%{value_formatted}/i)){text=text.replace('%{value_formatted}',typeof value==='number'?RGraph.numberFormat({object:opt.object,number:value.toFixed(opt.object.properties.tooltipsFormattedDecimals),thousand:opt.object.properties.tooltipsFormattedThousand||',',point:opt.object.properties.tooltipsFormattedPoint||'.',unitspre:opt.object.properties.tooltipsFormattedUnitsPre||'',unitspost:opt.object.properties.tooltipsFormattedUnitsPost||''}):null);}else{text=text.replace('%{value}',value);}}
var regexp=new RegExp(/%{function:([A-Za-z0-9]+)\((.*?)\)}/,'s');text=text.replace(/\r/,'|CR|');text=text.replace(/\n/,'|LF|');while(text.match(regexp)){var str=RegExp.$1+'('+RegExp.$2+')';for(var i=0,len=str.length;i<len;++i){str=str.replace(/\r?\n/,"\\n");}
var func=new Function('return '+str);var ret=func();text=text.replace(regexp,ret)}
text=text.replace(/\|CR\|/,' ');text=text.replace(/\|LF\|/,' ');text=text.replace(/\r?\n/g,'<br />');text=text.replace(/___--PERCENT--___/g,'%')
return text.toString();}
tooltipObj.__original_text__=opt.text;opt.text=substitute(opt.text);tooltipObj.innerHTML=opt.text;tooltipObj.__text__=opt.text;tooltipObj.id='__rgraph_tooltip_'+obj.id+'_'+obj.uid+'_'+opt.index;tooltipObj.__event__=prop.tooltipsEvent||'click';tooltipObj.__object__=obj;if(typeof opt.index==='number'){tooltipObj.__index__=opt.index;}
if(typeof opt.dataset==='number'){tooltipObj.__dataset__=opt.dataset;}
if(typeof opt.group==='number'||RGraph.SVG.isNull(opt.group)){tooltipObj.__group__=opt.group;}
if(typeof opt.sequentialIndex==='number'){tooltipObj.__sequentialIndex__=opt.sequentialIndex;}
document.body.appendChild(tooltipObj);var width=tooltipObj.offsetWidth,height=tooltipObj.offsetHeight;tooltipObj.style.left=opt.event.pageX-(width/2)+'px';var y=opt.event.pageY-height-15;if(y<0){y=5;}
tooltipObj.style.top=y+'px';tooltipObj.style.width=width+'px';if(parseFloat(tooltipObj.style.left)<=5){tooltipObj.style.left='5px';}
if(parseFloat(tooltipObj.style.left)+parseFloat(tooltipObj.style.width)>window.innerWidth){tooltipObj.style.left=''
tooltipObj.style.right='5px'}
if(RGraph.SVG.isFixed(obj.svg)){var scrollTop=window.scrollY||document.documentElement.scrollTop;tooltipObj.style.position='fixed';tooltipObj.style.top=opt.event.pageY-scrollTop-height-10+'px';}
tooltipObj.onmousedown=function(e)
{e.stopPropagation();};tooltipObj.onmouseup=function(e)
{e.stopPropagation();};tooltipObj.onclick=function(e)
{if(e.button==0){e.stopPropagation();}};document.body.addEventListener('mouseup',function(e)
{RGraph.SVG.hideTooltip();},false);RGraph.SVG.REG.set('tooltip',tooltipObj);RGraph.SVG.REG.set('tooltip-lastx',parseFloat(tooltipObj.style.left));RGraph.SVG.REG.set('tooltip-lasty',parseFloat(tooltipObj.style.top));RGraph.SVG.fireCustomEvent(obj,'ontooltip');};})(window,document);